<!doctype html><html lang=ru><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>94. –ú—å—é—Ç–µ–∫—Å</title><link rel=preload href=//localhost:1313/css/bundle.min.9f31ab3051ce6ec3cb783c63ef06b66ddefaa1e55f17eb4c0da5e6722652a845.css as=style><link rel=stylesheet href=//localhost:1313/css/bundle.min.9f31ab3051ce6ec3cb783c63ef06b66ddefaa1e55f17eb4c0da5e6722652a845.css><link rel=icon type=image/png href=//localhost:1313/images/icon-cat-bant.png sizes=32x32><style>.site-header{background-image:url(//localhost:1313/images/header-image.47babd5258d184f688fa360cc0cdb99121f050b226f9e840f64e1581e9b37a66.webp)}</style></head><body><div class=site-wrapper><header class=site-header><div class=header-content><h1 class=site-title>Go-–ö–æ—Ç—è—Ä–∞</h1><p class=site-description>–†—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ Golang</p></div></header><nav class=main-nav><ul><li><a href=../../>–ì–ª–∞–≤–Ω–∞—è</a></li><li><a href=../../tour>A Tour of Go</a></li><li><a href=../../docs>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></li><li><a href=../../cat-docs>–°—Ç–∞—Ç—å–∏ –ö–æ—Ç—è—Ä—ã</a></li></ul></nav><main class=main-container><aside class=sidebar><div class="widget categories"><div class=telegram-widget><h3>–ú—ã –≤ telegram</h3><p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É!</p><a href=https://t.me/gocat_dev class=tg-btn target=_blank>–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ @gocat_dev</a></div></div></aside><div class=content><nav class=breadcrumb aria-label="–•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏"><a href=../../ class=breadcrumb-item>–ì–ª–∞–≤–Ω–∞—è</a>
<span class=breadcrumb-separator>‚Üí</span>
<a href=../../tour/ class=breadcrumb-item>–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ Tour of Go</a>
<span class=breadcrumb-separator>‚Üí</span>
<span class="breadcrumb-item current">94. –ú—å—é—Ç–µ–∫—Å</span></nav><article class=lesson><header class=lesson-header><h1>94. –ú—å—é—Ç–µ–∫—Å</h1></header><div class=lesson-content><p>–ú—ã –≤–∏–¥–µ–ª–∏, —á—Ç–æ –∫–∞–Ω–∞–ª—ã –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.</p><p>–ù–æ —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –æ–±—â–µ–Ω–∏–µ? –ß—Ç–æ, –µ—Å–ª–∏ –º—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤?</p><p>–≠—Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–Ω—ã–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º (mutual exclusion), –∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –µ–≥–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç, ‚Äî –º—å—é—Ç–µ–∫—Å.</p><p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Go –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é sync.Mutex –∏ –¥–≤—É—Ö –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤:</p><p>Lock<br>Unlock</p><p>–ú—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ä–µ–∂–∏–º–µ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –æ–∫—Ä—É–∂–∏–≤ –µ–≥–æ –≤—ã–∑–æ–≤–∞–º–∏ Lock –∏ Unlock, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –º–µ—Ç–æ–¥–µ Inc.</p><p>–ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å defer, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É –º—å—é—Ç–µ–∫—Å–∞, –∫–∞–∫ –≤ –º–µ—Ç–æ–¥–µ Value.</p><div class=go-playground id=playground-example1><div class=playground-header><h4>Go Playground</h4><div class=playground-actions><button class=playground-btn onclick='runGoCode("example1")'>
‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å
</button>
<button class=playground-btn onclick='formatGoCode("example1")'>
üõ† –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
</button>
<button class=playground-btn onclick='resetGoCode("example1")'>
‚ü≥ –°–±—Ä–æ—Å–∏—Ç—å</button></div></div><div class=code-editor><div class=line-numbers id=line-numbers-example1></div><textarea id=go-code-example1 class=go-code-textarea placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Go –∫–æ–¥ –∑–¥–µ—Å—å..." spellcheck=false oninput='updateLineNumbers("example1")' onscroll='syncScroll("example1")'>
package main

import (
    &#34;fmt&#34;
    &#34;sync&#34;
    &#34;time&#34;
)

// SafeCounter is safe to use concurrently.
type SafeCounter struct {
    mu sync.Mutex
    v  map[string]int
}

// Inc increments the counter for the given key.
func (c *SafeCounter) Inc(key string) {
    c.mu.Lock()
    // Lock so only one goroutine at a time can access the map c.v.
    c.v[key]&#43;&#43;
    c.mu.Unlock()
}

// Value returns the current value of the counter for the given key.
func (c *SafeCounter) Value(key string) int {
    c.mu.Lock()
    // Lock so only one goroutine at a time can access the map c.v.
    defer c.mu.Unlock()
    return c.v[key]
}

func main() {
    c := SafeCounter{v: make(map[string]int)}
    for i := 0; i &lt; 1000; i&#43;&#43; {
        go c.Inc(&#34;somekey&#34;)
    }

	time.Sleep(time.Second)
	fmt.Println(c.Value(&#34;somekey&#34;))
}

</textarea></div><div class=playground-output><div class=output-header><span>–í—ã–≤–æ–¥:</span>
<button class=clear-btn onclick='clearOutput("example1")'>
–û—á–∏—Å—Ç–∏—Ç—å</button></div><pre id=output-example1 class=output-content></pre></div></div></div><div class=lesson-meta><p class=article-date><time>12.10.2025</time></p></div><nav class=lesson-navigation><div class=nav-container>üìñ <a href=../../tour/777-/ class="nav-btn prev">777. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞ ‚Üí</a></div></nav><div class=original-doc-link><a href=https://go.dev/tour/concurrency/9 target=_blank rel=noopener>–û—Ä–∏–≥–∏–Ω–∞–ª —Å—Ç–∞—Ç—å–∏ –Ω–∞ —Å–∞–π—Ç–µ go.dev</a></div></article></div></main><footer class=footer><p>¬© 2025 Go-–ö–æ—Ç—è—Ä–∞</p></footer></div><script src=//localhost:1313/js/go-playground.min.ba9ba48e8bbe056aa2187849e18077201280e49fb76376d968a29e81e1d9e203.js defer></script></body></html>